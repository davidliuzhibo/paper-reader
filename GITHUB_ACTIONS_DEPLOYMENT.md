# è®ºæ–‡è§£è¯» Skill äº‘ç«¯éƒ¨ç½²æŒ‡å—

å°† `lunwen` skill è¿ç§»åˆ° GitHub Actions å®ç°äº‘ç«¯å®šæ—¶æ‰§è¡Œã€‚

---

## æŠ€æœ¯å¯è¡Œæ€§åˆ†æ

### âœ… å¯è¡Œ

| éœ€æ±‚ | GitHub Actions æ”¯æŒæƒ…å†µ |
|------|-------------------------|
| Python è¿è¡Œç¯å¢ƒ | âœ… åŸç”Ÿæ”¯æŒ Python 3.11 |
| ç¬¬ä¸‰æ–¹ API è°ƒç”¨ | âœ… é€šè¿‡ yunwu.ai è°ƒç”¨ Claude |
| PDF æ–‡ä»¶å¤„ç† | âœ… PyPDF2 ç­‰åº“æ”¯æŒ |
| å¤–éƒ¨ API è°ƒç”¨ | âœ… æ”¯æŒ HTTPS å‡ºç«™è¯·æ±‚ |
| å®šæ—¶è§¦å‘ | âœ… cron è¡¨è¾¾å¼æ”¯æŒ |
| Secrets ç®¡ç† | âœ… åŠ å¯†å­˜å‚¨æ•æ„Ÿä¿¡æ¯ |
| æ–‡ä»¶å­˜å‚¨ | âœ… Artifacts + Git æäº¤ |

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **è¿è¡Œæ—¶é™åˆ¶**: GitHub Actions å…è´¹ç‰ˆæ¯ä¸ª job æœ€é•¿è¿è¡Œ 6 å°æ—¶
2. **å¹¶å‘é™åˆ¶**: å…è´¹è´¦æˆ·æœ€å¤š 20 ä¸ªå¹¶å‘ job
3. **å­˜å‚¨é™åˆ¶**: Artifacts é»˜è®¤ä¿ç•™ 90 å¤©
4. **ç½‘ç»œé™åˆ¶**: æŸäº›åœ°åŒºå¯èƒ½æ— æ³•è®¿é—®ç‰¹å®š API

---

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Actions Workflow                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚   è§¦å‘æ–¹å¼:                                                   â”‚
â”‚   â”œâ”€â”€ å®šæ—¶ (cron): æ¯å¤©åŒ—äº¬æ—¶é—´ 09:00                          â”‚
â”‚   â”œâ”€â”€ æ‰‹åŠ¨ (workflow_dispatch): ä¼ å…¥ URL æˆ–æ–‡ä»¶è·¯å¾„            â”‚
â”‚   â””â”€â”€ æ¨é€ (push): papers/*.pdf æœ‰æ–°æ–‡ä»¶æ—¶                    â”‚
â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  Download   â”‚ -> â”‚  yunwu.ai API    â”‚ -> â”‚   Save     â”‚ â”‚
â”‚   â”‚  PDF File   â”‚    â”‚  (Claude Opus)   â”‚    â”‚   Output   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                              â”‚
â”‚                              v                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                    â”‚   Yunwu API      â”‚                     â”‚
â”‚                    â”‚   (Image Gen)    â”‚                     â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## éœ€è¦é…ç½®çš„ GitHub Secrets

| Secret åç§° | ç”¨é€” | å€¼ |
|------------|------|-----|
| `YUNWU_API_KEY` | yunwu.ai Claude API è®¤è¯ | `sk-GFAAGFNIHon8fFSLYvNZ8q4I1rE4NdkPYc5CNmP0LwTOmmN0` |
| `YUNWU_IMAGE_API_KEY` | å›¾ç‰‡ç”Ÿæˆ API è®¤è¯ï¼ˆå¯é€‰ï¼‰ | `sk-vnGbZHjawACCghqzVzekqy8OPEa42UPnmL2rMKTmAbvZPywV` |

### API é…ç½®ä¿¡æ¯

**Claude API (é€šè¿‡ yunwu.ai)**:
- ç«¯ç‚¹: `https://yunwu.ai/v1/messages`
- æ¨¡å‹: `claude-opus-4-5-20251101`

**å›¾ç‰‡ç”Ÿæˆ API**:
- ç«¯ç‚¹: `https://yunwu.ai/v1beta/models/gemini-3-pro-image-preview:generateContent`

> ğŸ’¡ å¦‚æœä¸¤ä¸ª API ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ï¼Œåªéœ€é…ç½® `YUNWU_API_KEY` å³å¯ã€‚

---

## æ–‡ä»¶ç»“æ„

```
paper-reader/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ paper-reader.yml      # GitHub Actions å·¥ä½œæµ
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ cloud_paper_reader.py     # äº‘ç«¯æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ papers/                        # å­˜æ”¾å¾…å¤„ç†çš„ PDF æ–‡ä»¶
â”‚   â””â”€â”€ .gitkeep
â”œâ”€â”€ outputs/                       # ç”Ÿæˆçš„è§£è¯»æ–‡ä»¶
â”‚   â””â”€â”€ .gitkeep
â””â”€â”€ skills/
    â””â”€â”€ lunwen/
        â””â”€â”€ SKILL.md              # åŸå§‹ Skill å®šä¹‰
```

---

## ä¸€æ­¥æ­¥é…ç½®æµç¨‹

### æ­¥éª¤ 1: æ¨é€ä»£ç åˆ° GitHub

```bash
git add -A
git commit -m "Update for yunwu.ai third-party API"
git push origin master
```

### æ­¥éª¤ 2: é…ç½® GitHub Secrets

1. æ‰“å¼€ä»“åº“é¡µé¢: https://github.com/davidliuzhibo/paper-reader
2. ç‚¹å‡» **Settings** (è®¾ç½®)
3. åœ¨å·¦ä¾§èœå•é€‰æ‹© **Secrets and variables** â†’ **Actions**
4. ç‚¹å‡» **New repository secret**
5. æ·»åŠ ä»¥ä¸‹ Secrets:

#### Secret 1: YUNWU_API_KEY (å¿…é¡»)

- **Name**: `YUNWU_API_KEY`
- **Secret**: `sk-GFAAGFNIHon8fFSLYvNZ8q4I1rE4NdkPYc5CNmP0LwTOmmN0`

#### Secret 2: YUNWU_IMAGE_API_KEY (å¯é€‰ï¼Œç”¨äºå›¾ç‰‡ç”Ÿæˆ)

- **Name**: `YUNWU_IMAGE_API_KEY`
- **Secret**: `sk-vnGbZHjawACCghqzVzekqy8OPEa42UPnmL2rMKTmAbvZPywV`

### æ­¥éª¤ 3: éªŒè¯ Workflow

1. è¿›å…¥ä»“åº“çš„ **Actions** æ ‡ç­¾é¡µ
2. æ‰¾åˆ° "Paper Reader - è®ºæ–‡è§£è¯»è‡ªåŠ¨åŒ–" workflow
3. ç‚¹å‡» **Run workflow** æ‰‹åŠ¨è§¦å‘æµ‹è¯•

### æ­¥éª¤ 4: ä½¿ç”¨æ–¹å¼

#### æ–¹å¼ A: å®šæ—¶è‡ªåŠ¨æ‰§è¡Œ

Workflow ä¼šåœ¨æ¯å¤©åŒ—äº¬æ—¶é—´ 09:00 è‡ªåŠ¨è¿è¡Œï¼Œå¤„ç† `papers/` ç›®å½•ä¸‹æœ€æ–°çš„ PDF æ–‡ä»¶ã€‚

#### æ–¹å¼ B: æ‰‹åŠ¨è§¦å‘ (ä¼ å…¥ URL)

1. è¿›å…¥ Actions â†’ Paper Reader
2. ç‚¹å‡» **Run workflow**
3. åœ¨ `paper_url` è¾“å…¥æ¡†å¡«å…¥è®ºæ–‡ PDF çš„ URL
4. ç‚¹å‡» **Run workflow**

#### æ–¹å¼ C: æ‰‹åŠ¨è§¦å‘ (ä»“åº“å†…æ–‡ä»¶)

1. è¿›å…¥ Actions â†’ Paper Reader
2. ç‚¹å‡» **Run workflow**
3. åœ¨ `paper_path` è¾“å…¥æ¡†å¡«å…¥ä»“åº“å†…çš„æ–‡ä»¶è·¯å¾„ï¼Œå¦‚ `papers/example.pdf`
4. ç‚¹å‡» **Run workflow**

#### æ–¹å¼ D: æ¨é€è§¦å‘

å°† PDF æ–‡ä»¶æ¨é€åˆ° `papers/` ç›®å½•ï¼Œworkflow ä¼šè‡ªåŠ¨è§¦å‘ï¼š

```bash
cp ~/Downloads/new-paper.pdf papers/
git add papers/new-paper.pdf
git commit -m "Add new paper for processing"
git push
```

---

## æŸ¥çœ‹ç»“æœ

1. **GitHub Actions æ—¥å¿—**: åœ¨ Actions æ ‡ç­¾é¡µæŸ¥çœ‹æ‰§è¡Œæ—¥å¿—
2. **Artifacts ä¸‹è½½**: æ¯æ¬¡è¿è¡Œä¼šç”Ÿæˆå¯ä¸‹è½½çš„ artifacts
3. **ä»“åº“ outputs/ ç›®å½•**: è§£è¯»æ–‡ä»¶ä¼šè‡ªåŠ¨æäº¤åˆ°ä»“åº“

---

## æ•…éšœæ’é™¤

### é—®é¢˜: YUNWU_API_KEY æ— æ•ˆ

```
[ERROR] YUNWU_API_KEY environment variable is not set
```

**è§£å†³**: æ£€æŸ¥ Secrets æ˜¯å¦æ­£ç¡®é…ç½®ï¼Œåç§°æ˜¯å¦æ‹¼å†™æ­£ç¡®ã€‚

### é—®é¢˜: API è¿”å› 401

```
[ERROR] API returned status 401
```

**è§£å†³**: æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®ï¼Œæˆ–é¢åº¦æ˜¯å¦ç”¨å°½ã€‚

### é—®é¢˜: PDF æå–å¤±è´¥

```
[ERROR] PDF extraction failed
```

**è§£å†³**: ç¡®è®¤ PDF æ–‡ä»¶ä¸æ˜¯æ‰«æç‰ˆæˆ–åŠ å¯†ç‰ˆã€‚

---

## æˆæœ¬ä¼°ç®—

| èµ„æº | å…è´¹é¢åº¦ | é¢„è®¡æ¶ˆè€— |
|------|----------|----------|
| GitHub Actions | 2000åˆ†é’Ÿ/æœˆ | ~5åˆ†é’Ÿ/æ¬¡ |
| yunwu.ai Claude API | æŒ‰é‡ä»˜è´¹ | å–å†³äºå¥—é¤ |
| yunwu.ai å›¾ç‰‡ API | æŒ‰é‡ä»˜è´¹ | ~2-3å¼ /ç¯‡ |

---

## å‚è€ƒèµ„æ–™

- [yunwu.ai API æ–‡æ¡£](https://yunwu.ai)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
